<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>jQuery UI Datepicker - Default functionality</title>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script>
      $( function() {
          $( "#datepicker" ).datepicker();
      } );
  </script>
</head>
<body>

<%= form_tag :action => 'by_project' do%>
    <div class='row' style="white-space: nowrap">

      <p>Date: <input value="<%= @current_filter['day'] %>" type="text" id="datepicker" name="day"></p>

      <label>Project:&nbsp;</label>
      <%= select_tag "project", options_from_collection_for_select(@projects, "id", "title", @current_filter['project'].id) %>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

      <%= button_tag(type: "submit", class: "btn btn-success") do %>
          <i class="glyphicon glyphicon-arrow-right"></i>
      <% end %>

    </div>
<% end %>

</body>
</html>

  <div class='row'>
    <div class='panel panel-success'>
      <div class="panel-heading">
        <center><h3>Reports</h3></center>
        <div class='row' style="white-space: nowrap">
          <center>
            <div class='col-xs-4'>
              <h4>Project: <%=@current_filter['project'].title %></h4>
            </div>
            <div class='row' style="white-space: nowrap">
              <h4>Date: <% @current_filter['day'] %> </h4>
            </div>
          </center>
        </div>
      </div>

      <div class="container">
        <div class='row' align='center' style="background-color: #55b25d;">
          <div class='col-xs-4'>
            <div class='row'>
              <h4>Task Info</h4>
            </div>
            <div class='row'>
              <div class='col-xs-6'>
                <h5>Title</h5>
              </div>
              <div class='col-xs-6'>
                <h5>Requirement</h5>
              </div>
            </div>
          </div>
          <div class='col-xs-3'>
            <div class='row'>
              <h4>Worked Time</h4>
            </div>
            <div class='row'>
              <div class='col-xs-6'>
                <h5>Total</h5>
              </div>
              <div class='col-xs-6'>
                <h5>Day</h5>
              </div>
            </div>
          </div>
          <div class='col-xs-2'>
            <h4>Assigned user</h4>
          </div>
          <div class='col-xs-1'>
            <h4>Status</h4>
          </div>
        </div>
        <div class='row' style='height: 700px; overflow-y: auto; overflow-x:hidden;'>
              <div class='row' style="background-color: #f2f4f7" align='center'>
                <% if @data['tasks'].length == 0 %>
                    <div class='col-xs-4'>
                      <div class='row'>
                        <div class='col-xs-6'>
                          <h5>-</h5>
                        </div>
                        <div class='col-xs-6'>
                          <h5>-</h5>
                        </div>
                      </div>
                    </div>
                    <div class='col-xs-3'>
                      <div class='row'>
                        <div class='col-xs-6'>
                          <h5>-</h5>
                        </div>
                        <div class='col-xs-6'>
                          <h5>-</h5>
                        </div>
                      </div>
                    </div>
                    <div class='col-xs-2'>
                      <h5>-</h5>
                    </div>
                    <div class='col-xs-1'>
                      <h5>-</h5>
                    </div>
                <% else %>
                    <% for j in 0..@data['tasks'].length - 1 %>
                        <div class='col-xs-4'>
                          <h5><% if j == 0 %><%= @data['day'] %><% end %></h5>
                          <div class='row'>
                            <div class='col-xs-6'>
                              <h5><%= @data['tasks'][j].title %></h5>
                            </div>
                            <div class='col-xs-6'>
                              <h5><%= @data['tasks'][j].requirement %></h5>
                            </div>
                          </div>
                        </div>
                        <div class='col-xs-3'>
                          <div class='row'>
                            <div class='col-xs-6'>
                              <h5><% time = number_with_precision( @data['task_infos'][@data['tasks'][j].id]['duration'], precision: 1)%>
                                <%= time.to_s + ' minute'.pluralize(time) %></h5>
                            </div>
                            <div class='col-xs-6'>
                              <h5><% time = number_with_precision( @data['task_infos'][@data['tasks'][j].id]['duration_day'], precision: 1)%>
                                <%= time.to_s + ' minute'.pluralize(time) %></h5>
                            </div>
                          </div>
                        </div>
                        <div class='col-xs-2'>
                          <h5><%= @data['task_infos'][@data['tasks'][j].id]['assigned'] %></h5>
                        </div>
                        <div class='col-xs-1'>
                          <h5><%= @data['tasks'][j].status %></h5>
                        </div>
                        <% end %>
                    <% end %>
              </div>
        </div>
      </div>
    </div>
  </div>